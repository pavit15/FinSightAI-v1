<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Financial RAG Analyzer - FinanceAI Pro Ultra</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Live Market Ticker Banner -->
    <div class="market-ticker-banner" id="market-ticker">
        <div class="ticker-container">
            <div class="ticker-item">
                <span class="symbol">NIFTY 50</span>
                <span class="price">22,147.90</span>
                <span class="change positive">+245.30 (+1.12%)</span>
            </div>
            <div class="ticker-item">
                <span class="symbol">SENSEX</span>
                <span class="price">72,832.16</span>
                <span class="change positive">+820.15 (+1.14%)</span>
            </div>
            <div class="ticker-item">
                <span class="symbol">TCS</span>
                <span class="price">4,125.60</span>
                <span class="change positive">+45.20 (+1.11%)</span>
            </div>
            <div class="ticker-item">
                <span class="symbol">INFY</span>
                <span class="price">1,847.35</span>
                <span class="change positive">+28.45 (+1.57%)</span>
            </div>
            <div class="ticker-item">
                <span class="symbol">WIPRO</span>
                <span class="price">563.90</span>
                <span class="change negative">-8.20 (-1.43%)</span>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Enhanced Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="brand-logo">
                    <i class="fas fa-chart-line"></i>
                    <div class="brand-text">
                        <h2>FinanceAI Pro Ultra</h2>
                        <p class="sidebar-subtitle">Ultimate RAG Analyzer</p>
                    </div>
                </div>
            </div>
            
            <ul class="nav-menu">
                <li class="nav-item active" data-page="overview">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Overview</span>
                </li>
                <li class="nav-item" data-page="upload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Document Upload</span>
                </li>
                <li class="nav-item" data-page="documents">
                    <i class="fas fa-folder-open"></i>
                    <span>Document Manager</span>
                </li>
                <li class="nav-item" data-page="live-market">
                    <i class="fas fa-broadcast-tower"></i>
                    <span>Live Market Data</span>
                </li>
                <li class="nav-item" data-page="kpi-builder">
                    <i class="fas fa-calculator"></i>
                    <span>Custom KPI Builder</span>
                </li>
                <li class="nav-item" data-page="dashboards">
                    <i class="fas fa-chart-bar"></i>
                    <span>Smart Dashboards</span>
                </li>
                <li class="nav-item" data-page="chart-lab">
                    <i class="fas fa-flask"></i>
                    <span>Ratio Chart Lab</span>
                </li>
                <li class="nav-item" data-page="alerts">
                    <i class="fas fa-bell"></i>
                    <span>Smart Alerts</span>
                </li>
                <li class="nav-item" data-page="chatbot">
                    <i class="fas fa-robot"></i>
                    <span>AI Chatbot</span>
                </li>
                <li class="nav-item" data-page="scenarios">
                    <i class="fas fa-crystal-ball"></i>
                    <span>Scenario Modeling</span>
                </li>
                <li class="nav-item" data-page="search">
                    <i class="fas fa-search"></i>
                    <span>AI Document Search</span>
                </li>
                <li class="nav-item" data-page="settings">
                    <i class="fas fa-cogs"></i>
                    <span>Settings</span>
                </li>
            </ul>

            <div class="sidebar-footer">
                <div class="system-status">
                    <div class="status-indicator">
                        <div class="status-dot status-success"></div>
                        <span>All Systems Online</span>
                    </div>
                    <div class="status-stats">
                        <div class="stat">
                            <span class="stat-value" id="sidebar-docs">0</span>
                            <span class="stat-label">Docs</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="sidebar-kpis">0</span>
                            <span class="stat-label">KPIs</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="sidebar-alerts">0</span>
                            <span class="stat-label">Alerts</span>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Global Search Bar -->
            <div class="global-search-container">
                <div class="global-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="🔍 AI-powered document search across all files..." id="global-search-input">
                    <button class="btn btn--primary btn--sm" onclick="performGlobalSearch()">
                        <i class="fas fa-magic"></i>
                        Search & Synthesize
                    </button>
                </div>
            </div>

            <!-- Overview Page -->
            <section id="overview-page" class="page active">
                <div class="page-header">
                    <h1>Ultimate Financial Document Analyzer</h1>
                    <p>Enterprise-grade RAG-powered platform with 10 advanced AI features</p>
                </div>

                <div id="empty-state" class="empty-state">
                    <div class="empty-state-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <h2>Welcome to FinanceAI Pro Ultra</h2>
                    <p>Your comprehensive financial intelligence platform with live market data, custom KPIs, smart alerts, and advanced AI capabilities</p>
                    <div class="empty-state-actions">
                        <button class="btn btn--primary btn--lg" onclick="showPage('upload')">
                            <i class="fas fa-upload"></i>
                            Upload Documents & Start
                        </button>
                        <button class="btn btn--outline btn--lg" onclick="showPage('live-market')">
                            <i class="fas fa-broadcast-tower"></i>
                            View Live Market Data
                        </button>
                    </div>
                    <div class="features-preview">
                        <h3>🚀 New Ultimate Features</h3>
                        <div class="features-grid">
                            <div class="feature-item"><i class="fas fa-broadcast-tower"></i> Live NSE/BSE Data</div>
                            <div class="feature-item"><i class="fas fa-calculator"></i> Custom KPI Builder</div>
                            <div class="feature-item"><i class="fas fa-bell"></i> Smart Alerts</div>
                            <div class="feature-item"><i class="fas fa-balance-scale"></i> Peer Comparison</div>
                            <div class="feature-item"><i class="fas fa-search-plus"></i> AI Document Synthesis</div>
                            <div class="feature-item"><i class="fas fa-crystal-ball"></i> Scenario Modeling</div>
                            <div class="feature-item"><i class="fas fa-flask"></i> Interactive Chart Lab</div>
                            <div class="feature-item"><i class="fas fa-microphone"></i> Voice-Enabled Chatbot</div>
                            <div class="feature-item"><i class="fas fa-sitemap"></i> Provenance Tracking</div>
                            <div class="feature-item"><i class="fas fa-workflow"></i> Decision Workflows</div>
                        </div>
                    </div>
                </div>

                <div id="overview-content" class="overview-content hidden">
                    <div class="stats-grid">
                        <div class="stat-card premium">
                            <div class="stat-icon">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-documents">0</h3>
                                <p>Documents Processed</p>
                                <div class="stat-change positive">
                                    <i class="fas fa-arrow-up"></i>
                                    <span id="doc-growth">0%</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card premium">
                            <div class="stat-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-kpis">0</h3>
                                <p>Custom KPIs Created</p>
                                <div class="stat-change positive">
                                    <i class="fas fa-plus"></i>
                                    <span>User-Defined</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card premium">
                            <div class="stat-icon">
                                <i class="fas fa-bell"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-alerts">0</h3>
                                <p>Active Smart Alerts</p>
                                <div class="stat-change">
                                    <i class="fas fa-eye"></i>
                                    <span>Monitoring</span>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card premium">
                            <div class="stat-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="total-queries">0</h3>
                                <p>AI Queries Answered</p>
                                <div class="stat-change positive">
                                    <i class="fas fa-brain"></i>
                                    <span>Smart Insights</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <div class="action-card" onclick="showPage('kpi-builder')">
                            <div class="action-icon">
                                <i class="fas fa-calculator"></i>
                            </div>
                            <h3>Build Custom KPIs</h3>
                            <p>Create your own financial ratios and metrics</p>
                        </div>
                        <div class="action-card" onclick="showPage('chart-lab')">
                            <div class="action-icon">
                                <i class="fas fa-flask"></i>
                            </div>
                            <h3>Ratio Chart Lab</h3>
                            <p>Interactive drag-and-drop chart building</p>
                        </div>
                        <div class="action-card" onclick="showPage('scenarios')">
                            <div class="action-icon">
                                <i class="fas fa-crystal-ball"></i>
                            </div>
                            <h3>Scenario Modeling</h3>
                            <p>What-if analysis and forecasting</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Upload Page -->
            <section id="upload-page" class="page">
                <div class="page-header">
                    <h1>Upload Financial Documents</h1>
                    <p>Upload and process financial documents for AI-powered analysis</p>
                </div>

                <div class="upload-section">
                    <div class="upload-area" id="upload-area">
                        <div class="upload-content">
                            <div class="upload-animation">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h3>Drag & Drop Your Documents</h3>
                            <p>Or click to browse and select files</p>
                            <input type="file" id="file-input" multiple accept=".pdf,.xlsx,.xls,.csv,.txt" hidden>
                            <button class="btn btn--primary file-upload-btn" id="select-files-btn">
                                <i class="fas fa-plus"></i>
                                Select Files
                            </button>
                            <div class="upload-specs">
                                <div class="spec-item">
                                    <i class="fas fa-check"></i>
                                    <span>Max 100MB per file</span>
                                </div>
                                <div class="spec-item">
                                    <i class="fas fa-check"></i>
                                    <span>Batch upload supported</span>
                                </div>
                                <div class="spec-item">
                                    <i class="fas fa-check"></i>
                                    <span>AI-powered extraction</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="upload-queue" id="upload-queue"></div>
                </div>
            </section>

            <!-- Chart Lab Page -->
            <section id="chart-lab-page" class="page">
                <div class="page-header">
                    <h1>Interactive Ratio & Chart Lab</h1>
                    <p>Drag-and-drop visual analytics with custom chart creation</p>
                </div>

                <div class="chart-lab-container">
                    <div class="chart-lab-controls">
                        <div class="metrics-palette">
                            <h4>📊 Available Metrics</h4>
                            <div class="metrics-grid">
                                <div class="metric-chip" draggable="true" data-metric="revenue">Revenue</div>
                                <div class="metric-chip" draggable="true" data-metric="net-margin">Net Margin</div>
                                <div class="metric-chip" draggable="true" data-metric="roe">ROE</div>
                                <div class="metric-chip" draggable="true" data-metric="debt-equity">Debt/Equity</div>
                                <div class="metric-chip" draggable="true" data-metric="current-ratio">Current Ratio</div>
                                <div class="metric-chip" draggable="true" data-metric="operating-margin">Operating Margin</div>
                                <div class="metric-chip" draggable="true" data-metric="roa">ROA</div>
                                <div class="metric-chip" draggable="true" data-metric="eps">EPS</div>
                            </div>
                        </div>

                        <div class="chart-builder">
                            <h4>🛠️ Chart Builder</h4>
                            <div class="chart-config">
                                <div class="form-group">
                                    <label class="form-label">Chart Type</label>
                                    <select class="form-control" id="chart-type-select">
                                        <option value="line">Line Chart</option>
                                        <option value="bar">Bar Chart</option>
                                        <option value="radar">Radar Chart</option>
                                        <option value="scatter">Scatter Plot</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Time Period</label>
                                    <select class="form-control" id="time-period-select">
                                        <option value="5y">Last 5 Years</option>
                                        <option value="3y">Last 3 Years</option>
                                        <option value="1y">Last 1 Year</option>
                                        <option value="ytd">Year to Date</option>
                                    </select>
                                </div>
                                <button class="btn btn--primary" onclick="generateCustomChart()">
                                    <i class="fas fa-chart-bar"></i>
                                    Generate Chart
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="chart-canvas-area">
                        <div class="chart-drop-zone" id="chart-drop-zone">
                            <div class="drop-zone-content">
                                <i class="fas fa-mouse-pointer"></i>
                                <p>Drag metrics here to create charts</p>
                                <div class="selected-metrics" id="selected-metrics"></div>
                            </div>
                        </div>
                        <div class="chart-display" id="custom-chart-display">
                            <div class="chart-container" id="chart-container" style="height: 400px; position: relative;">
                                <canvas id="dynamic-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Include other pages from previous implementation -->
            <section id="documents-page" class="page">
                <div class="page-header">
                    <h1>Document Manager</h1>
                    <p>Manage, organize, and monitor your financial document library</p>
                </div>

                <div id="no-documents-state" class="no-content-state">
                    <i class="fas fa-folder-open"></i>
                    <h3>No Documents Yet</h3>
                    <p>Upload documents to start building your financial knowledge base</p>
                    <button class="btn btn--primary" onclick="showPage('upload')">
                        <i class="fas fa-upload"></i>
                        Upload Documents
                    </button>
                </div>

                <div id="documents-content" class="documents-content hidden">
                    <div class="documents-toolbar">
                        <div class="search-section">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" placeholder="Search documents..." id="document-search">
                            </div>
                        </div>
                        <div class="toolbar-actions">
                            <button class="btn btn--outline" id="refresh-documents">
                                <i class="fas fa-sync"></i>
                                Refresh
                            </button>
                        </div>
                    </div>

                    <div class="documents-grid" id="documents-grid"></div>
                </div>
            </section>

            <!-- Live Market Data Page -->
            <section id="live-market-page" class="page">
                <div class="page-header">
                    <h1>Live NSE/BSE Market Data</h1>
                    <p>Real-time market feeds integrated with your financial analysis</p>
                </div>

                <div class="market-dashboard">
                    <div class="market-summary">
                        <div class="market-card">
                            <h3>NIFTY 50</h3>
                            <div class="market-price">22,147.90</div>
                            <div class="market-change positive">+245.30 (+1.12%)</div>
                            <div class="market-meta">Vol: 2.34Cr | High: 22,180 | Low: 21,890</div>
                        </div>
                        <div class="market-card">
                            <h3>SENSEX</h3>
                            <div class="market-price">72,832.16</div>
                            <div class="market-change positive">+820.15 (+1.14%)</div>
                            <div class="market-meta">Vol: 1.89Cr | High: 72,950 | Low: 71,980</div>
                        </div>
                    </div>

                    <div class="market-sections">
                        <div class="market-section">
                            <h3>📈 Top Gainers</h3>
                            <div class="stock-list" id="top-gainers"></div>
                        </div>
                        <div class="market-section">
                            <h3>📉 Top Losers</h3>
                            <div class="stock-list" id="top-losers"></div>
                        </div>
                        <div class="market-section">
                            <h3>📊 Most Active</h3>
                            <div class="stock-list" id="most-active"></div>
                        </div>
                    </div>

                    <div class="market-integration">
                        <h3>🔗 Integration with Your Portfolio</h3>
                        <div class="integration-options">
                            <button class="btn btn--primary" onclick="syncMarketData()">
                                <i class="fas fa-sync"></i>
                                Sync Live Data with Documents
                            </button>
                            <button class="btn btn--outline" onclick="setupMarketAlerts()">
                                <i class="fas fa-bell"></i>
                                Setup Market Alerts
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- KPI Builder Page -->
            <section id="kpi-builder-page" class="page">
                <div class="page-header">
                    <h1>Custom KPI Builder</h1>
                    <p>Create your own financial metrics and ratios with algebraic expressions</p>
                </div>

                <div class="kpi-builder-container">
                    <div class="kpi-form-section">
                        <div class="card">
                            <div class="card__body">
                                <h3>Create New KPI</h3>
                                <div class="form-group">
                                    <label class="form-label">KPI Name</label>
                                    <input type="text" class="form-control" id="kpi-name" placeholder="e.g., Custom Operating Efficiency">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Formula Expression</label>
                                    <input type="text" class="form-control" id="kpi-formula" placeholder="e.g., (EBITDA / Revenue) * 100">
                                    <small>Use field names: Revenue, EBITDA, Net_Income, Total_Assets, Shareholders_Equity, etc.</small>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Category</label>
                                    <select class="form-control" id="kpi-category">
                                        <option value="profitability">Profitability</option>
                                        <option value="efficiency">Efficiency</option>
                                        <option value="liquidity">Liquidity</option>
                                        <option value="leverage">Leverage</option>
                                        <option value="growth">Growth</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-control" id="kpi-description" rows="3" placeholder="Describe what this KPI measures..."></textarea>
                                </div>
                                <button class="btn btn--primary" onclick="createCustomKPI()">
                                    <i class="fas fa-plus"></i>
                                    Create KPI
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-list-section">
                        <h3>Your Custom KPIs</h3>
                        <div class="kpi-list" id="custom-kpi-list">
                            <!-- Custom KPIs will be populated here -->
                        </div>
                    </div>

                    <div class="kpi-calculator-section">
                        <div class="card">
                            <div class="card__body">
                                <h3>KPI Calculator</h3>
                                <div class="form-group">
                                    <label class="form-label">Select KPI to Calculate</label>
                                    <select class="form-control" id="calc-kpi-select">
                                        <option value="">Choose a KPI...</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Select Company</label>
                                    <select class="form-control" id="calc-company-select">
                                        <option value="">Choose a company...</option>
                                    </select>
                                </div>
                                <button class="btn btn--primary" onclick="calculateKPI()">
                                    <i class="fas fa-calculator"></i>
                                    Calculate
                                </button>
                                <div class="calculation-result" id="kpi-calculation-result"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Other pages would continue here but I'll keep them minimal for space -->
            <section id="dashboards-page" class="page">
                <div class="page-header">
                    <h1>Smart Financial Dashboards</h1>
                    <p>Interactive dashboards with AI-powered insights and analysis</p>
                </div>
                <div class="dashboard-placeholder">
                    <p>Dashboard functionality ready - upload documents to activate</p>
                </div>
            </section>

            <section id="alerts-page" class="page">
                <div class="page-header">
                    <h1>Smart Alerts & Recommendations</h1>
                    <p>AI-powered monitoring with anomaly detection and intelligent recommendations</p>
                </div>
                <div class="alerts-placeholder">
                    <p>Smart alerts functionality ready - upload documents to activate</p>
                </div>
            </section>

            <section id="chatbot-page" class="page">
                <div class="page-header">
                    <h1>AI Financial Analyst Chatbot</h1>
                    <p>Voice-enabled RAG chatbot with decision workflows</p>
                </div>
                <div class="chatbot-placeholder">
                    <p>AI Chatbot functionality ready - upload documents to activate</p>
                </div>
            </section>

            <section id="scenarios-page" class="page">
                <div class="page-header">
                    <h1>Scenario & Forecast Modeling</h1>
                    <p>AI-powered forecasting with what-if analysis capabilities</p>
                </div>
                <div class="scenarios-placeholder">
                    <p>Scenario modeling functionality ready - upload documents to activate</p>
                </div>
            </section>

            <section id="search-page" class="page">
                <div class="page-header">
                    <h1>AI-Powered Document Search & Synthesis</h1>
                    <p>Cross-document semantic search with intelligent synthesis</p>
                </div>
                <div class="search-placeholder">
                    <p>AI Document search functionality ready - upload documents to activate</p>
                </div>
            </section>

            <section id="settings-page" class="page">
                <div class="page-header">
                    <h1>System Settings</h1>
                    <p>Configure AI models, alerts, and system preferences</p>
                </div>
                <div class="settings-placeholder">
                    <p>System settings and configuration panel</p>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>